# Point

- zig 不包含垃圾回收器

- 面向内存编程
- 指针、堆分配、悬挂指针（悬垂指针）

- 数据与内存联系起来
- 变量是将一种类型与特定内存位置联系起来的标签

- 变量指向结构的起点
- 字段是按顺序排列的

- zig不保证结构的内存布局
- packed struct

- 取地址运算符`&`
  - 返回一个变量的地址

- 类型T的值的地址是`*T`

- 结构体方法

- 常量函数
  - 默认情况下，zig会传递一个值的副本（按值传递）

- 小类型可以通过值传递（复制），大类型通过引用传递能方便

- 编译器必须权衡复制的代价和通过指针间接访问字段的代价

- 指向指针的指针
  - `**User`

- 嵌套指针

```zig
pub const User = struct {
  id: u64,
  power: i32,
  name: []const u8,
}

// user.name.ptr 将指向二进制文件中存储所有常量的区域内的一个特定位置
```

- 嵌套指针，只会进行浅拷贝

- 指针的值是一个地址，复制该值意味得到相同的地址

- 递归结构
  - 每种类型都必须在编译时确定大小，而这里的递归结构体大小是无法确定的

- 值的大小
- 类型本身的大小

- 切片，是一个大小已知的类型
- Optional或unio，最大字段的大小是已知的，zig就使用这个
- 递归没有上限
